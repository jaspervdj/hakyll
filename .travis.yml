language: haskell
ghc: '8.0.2'
sudo: false

cache:
  directories:
  - '$HOME/.cabal'
  - '$HOME/.ghc'

branches:
  only:
    - 'master'

install:
  # It seems like it's actually better to use one job, since that makes it less
  # likely to run out of memory.
  - './scripts/tickle.sh cabal install --only-dependencies --enable-tests --jobs=1'

script:
  - 'cabal test'
